---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import '../styles/global.css';

interface Props {
  title: string;
  description: string;
  category: string;
  breadcrumbTitle: string;
}

const { title, description, category, breadcrumbTitle } = Astro.props;
const siteUrl = "https://partner.decari.de";
---

<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{title} – Decari Blog</title>
  <meta name="description" content={description} />

  <!-- Open Graph -->
  <meta property="og:type" content="article" />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:locale" content="de_DE" />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/assets/decari-favicon.png" />
  <link rel="apple-touch-icon" href="/assets/decari-favicon.png" />

  <!-- Preconnect -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <!-- Calendly CSS -->
  <link
    rel="preload"
    href="https://assets.calendly.com/assets/external/widget.css"
    as="style"
    onload="this.onload=null;this.rel='stylesheet'"
  />
  <noscript>
    <link rel="stylesheet" href="https://assets.calendly.com/assets/external/widget.css" />
  </noscript>
</head>
<body class="font-sans text-gray-800 bg-white antialiased">
  <Header />

  <article class="py-12 md:py-16">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Breadcrumb -->
      <nav class="text-sm text-gray-500 mb-6">
        <a href="/" class="hover:text-teal">Startseite</a>
        <span class="mx-2">/</span>
        <a href="/blog/" class="hover:text-teal">Blog</a>
        <span class="mx-2">/</span>
        <span class="text-gray-700">{breadcrumbTitle}</span>
      </nav>

      <!-- Article Header -->
      <header class="mb-10">
        <div class="text-xs text-teal font-semibold uppercase tracking-wide mb-3">
          {category}
        </div>
        <h1 class="text-3xl md:text-4xl font-bold text-navy mb-4">
          {title}
        </h1>
        <p class="text-lg text-gray-600">
          {description}
        </p>
      </header>

      <!-- Article Content -->
      <div class="prose prose-lg max-w-none">
        <slot />
      </div>

      <!-- CTA Section -->
      <div class="mt-16 bg-teal/10 border-l-4 border-teal p-8 rounded-r-xl">
        <h3 class="text-xl font-bold text-navy mb-3">
          Möchten Sie das Potenzial Ihrer Klienten nutzen?
        </h3>
        <p class="text-gray-600 mb-6">
          Decari übernimmt die komplette Antragstellung für Ihre Klienten. Berechnen Sie jetzt, wie viel Umsatz auf dem Tisch liegt.
        </p>
        <a
          href="/#rechner"
          class="inline-flex bg-teal text-white font-semibold px-6 py-3 rounded-lg hover:bg-teal-light transition-all"
        >
          Zum ROI-Rechner
        </a>
      </div>

      <!-- Back to Blog -->
      <div class="mt-12 pt-8 border-t border-gray-200">
        <a href="/blog/" class="text-teal font-medium hover:underline">
          &larr; Zurück zum Blog
        </a>
      </div>
    </div>
  </article>

  <Footer />

  <!-- Calendly Widget - lazy loaded -->
  <script is:inline>
    let calendlyLoaded = false;
    function loadCalendly() {
      if (calendlyLoaded) return;
      calendlyLoaded = true;
      const script = document.createElement("script");
      script.src = "https://assets.calendly.com/assets/external/widget.js";
      script.async = true;
      document.body.appendChild(script);
    }

    ["scroll", "mousemove", "touchstart", "click"].forEach((event) => {
      document.addEventListener(event, loadCalendly, { once: true, passive: true });
    });

    setTimeout(loadCalendly, 3000);
  </script>
</body>
</html>
